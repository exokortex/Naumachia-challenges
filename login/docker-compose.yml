version: '2.1'

services:
    shell:
        build:
            context: ./shell
            args:
                USERNAME: piggy
                PASSWORD: 91fca40d08def2c1
        image: naumachia/login/shell
        expose:
            - "23"
        cap_add:
            - NET_BIND_SERVICE
        networks:
            default:
                aliases:
                    - "shell"

    client:
        build: ./client
        image: naumachia/login/client
        command: [python, /app/client.py]
        restart: unless-stopped
        environment:
            SHELL_USER: piggy
            SHELL_PASS: 91fca40d08def2c1

networks:
    default:
        internal: true
        ipam:
            driver: mini
